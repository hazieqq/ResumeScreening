{% extends "base.html" %}
{% block title %}Login{% endblock %}
{% block content %}
<main>
    <br><br><br><br><br><div class="container">
        <div class="row justify-content-center">
            <div class="col">
                <div style="text-align: center;"><h1>Login</h1></div>
            </div>
        </div><br>
        <div class="row justify-content-center">
            <div class="input_form">
                <div class="col">
                    <label for="username">
                        <i class="fas fa-user"></i>
                    </label>
                    <input type="text" name="username" placeholder="Username" id="username" required>
                </div>
                <div class="col">
                    <label for="password">
                        <i class="fas fa-lock"></i>
                    </label>
                    <input type="password" name="password" placeholder="Password" id="password" required>
                        <div class="msg">{{ msg }}</div><br>
                </div>
            </div>
        </div>
        <div class="row justify-content-center">
            <button class="btn" id="submit" name="login">Login</button>
        </div>
    </div><br><br><br><br><br><br><br>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $(document).ready(function(){

            $("#submit").click(function(){
			var username = $("#username").val();
			var password = $("#password").val();
            console.log(username);
            console.log(password);

            $.ajax({
                url: "/test",
                type: "POST",
                data: {
                    'username': username,
                    'password': password
                },
                success: function (response, errorThrown) {
                    if(response == 'success'){
                        // Swal.fire(
                        //     'Login!',
                        //     'Login Successfully',
                        //     'success'
                        // )
                        window.location.href = '/index'
                    }else{
                        console.log(errorThrown);
                        //to do error 404 zieq ajaq nanti
                    }
                },
                error: function (data, message, errorThrown) {
                    console.log(errorThrown);
                    console.log("failed");
                    location.reload();
                },
            });

			// if(username != '' || password != ''){
			// 	Swal.fire(
			// 		'Login Successfully!',
			// 		'You clicked the button!',
			// 		'success'
			// 	)
			// }
                })
            });
        // function validateLogin() {
        //     var username = $("#username").val();
		// 	var password = $("#password").val();
        //     console.log(username);
        //     console.log(password);
        // }
	</script>
</main>
{% endblock %}